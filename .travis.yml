#Slack integration
notifications:
  slack:
    rooms:
          - taller2-drv:7KZQ9SbRYxKXS4XPARTY3Qjs#talk-to-travis
          - taller2-drv:7KZQ9SbRYxKXS4XPARTY3Qjs#general-build-status
#Branch specific
          - taller2-drv:7KZQ9SbRYxKXS4XPARTY3Qjs#app-server
    email: false
##############################

language: c

compiler: g++

before_script:
  - sudo apt-get update
  - sudo apt-get install -y libsnappy-dev libbz2-dev zlib1g-dev
  - wget https://gflags.googlecode.com/files/libgflags0_2.0-1_amd64.deb
  - sudo dpkg -i libgflags0_2.0-1_amd64.deb
  - wget https://gflags.googlecode.com/files/libgflags-dev_2.0-1_amd64.deb
  - sudo dpkg -i libgflags-dev_2.0-1_amd64.deb
  - git submodule init
  - git submodule update
  - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
  - sudo apt-get update -qq
  - sudo apt-get install -qq g++-4.8
  - export CXX="g++-4.8"

script:
  - cd source/libs/rocksdb
  - sudo make install
  - cd ../jsoncpp
  - python amalgamate.py
  - cd ../../Servidor
  - cmake .
  - make

after_success:
  - bash <(curl -s https://codecov.io/bash)
  - bash execute.sh
