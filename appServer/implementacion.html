

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Implementacion AppServer &mdash; DrTinder 1.0.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="DrTinder 1.0.0 documentation" href="../index.html"/>
        <link rel="up" title="App Server" href="index.html"/>
        <link rel="next" title="Configuracion AppServer" href="config.html"/>
        <link rel="prev" title="Build AppServer sin Docker" href="buildSinDocker.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> DrTinder
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../android/index.html">Android Client</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">App Server</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Docker.html">Docker build</a></li>
<li class="toctree-l2"><a class="reference internal" href="buildSinDocker.html">Build AppServer sin Docker</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Implementacion AppServer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#recepcion-y-procesamiento-de-mensajes-http">Recepción y procesamiento de mensajes HTTP</a></li>
<li class="toctree-l3"><a class="reference internal" href="#conexion-al-shared-server">Conexión al Shared Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#almacenamiento-de-datos">Almacenamiento de Datos</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="config.html">Configuracion AppServer</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l2"><a class="reference internal" href="coverage.html">Coverage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sharedServer/index.html">Shared Server</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">DrTinder</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">App Server</a> &raquo;</li>
      
    <li>Implementacion AppServer</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/appServer/implementacion.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="implementacion-appserver">
<span id="implementacion"></span><h1>Implementacion AppServer<a class="headerlink" href="#implementacion-appserver" title="Permalink to this headline">¶</a></h1>
<p>Este sistema tiene principalmente tres partes:</p>
<ol class="arabic simple">
<li>Recepción y procesamiento de mensajes HTTP</li>
<li>Conexión al Shared Server</li>
<li>Almacenamiento de datos</li>
</ol>
<div class="section" id="recepcion-y-procesamiento-de-mensajes-http">
<h2>Recepción y procesamiento de mensajes HTTP<a class="headerlink" href="#recepcion-y-procesamiento-de-mensajes-http" title="Permalink to this headline">¶</a></h2>
<p>Para la  conexión se utilizo mongoose web server de Cesanta ( <a class="reference external" href="https://github.com/cesanta/mongoose">https://github.com/cesanta/mongoose</a> ).
Mediante este se reciben y procesan. El <strong>RequestHandler</strong> toma el mensaje y decide cómo procesarlo diferenciando la uri a la cual se hizo y con qué método se lo llamó. Este llama a un <strong>MessageHandler</strong> que se ocupa del procesamiento de tal mensaje, almacenando, parseando los datos y llamando al shared server.</p>
</div>
<div class="section" id="conexion-al-shared-server">
<h2>Conexión al Shared Server<a class="headerlink" href="#conexion-al-shared-server" title="Permalink to this headline">¶</a></h2>
<p>Para la conexión al shared server se utilizo la libreria de curl, para poder correr el server debe tenerlo instalado. Para no profundizar en cómo usar curl se uso restclient-cpp ( <a class="reference external" href="https://github.com/mrtazz/restclient-cpp">https://github.com/mrtazz/restclient-cpp</a> ) que permite hacer los requests de manera simple.
Se debió crear un CsvParser y JsonParser (libreria utilizada: <a class="reference external" href="https://github.com/open-source-parsers/jsoncpp">jsoncpp</a> ) para poder traducir la información que venía del shared server para pasarla al cliente.</p>
</div>
<div class="section" id="almacenamiento-de-datos">
<h2>Almacenamiento de Datos<a class="headerlink" href="#almacenamiento-de-datos" title="Permalink to this headline">¶</a></h2>
<p>De los usuarios era necesario guardar nuevos datos en el server como la contraseña y una descripcion de estos, ademas de los token de autenticación, los likes entre ellos y sus respectivos chats. Para el almacenamiento de estos se utilizó rocksdb ( <a class="reference external" href="http://rocksdb.org/">http://rocksdb.org/</a> ), que es una base de datos NoSql. Se crearon el DatabaseManager, CharDatabaseManager y LikesDatabaseManager para abstraernos un poco de su implementación específica.
Para guardar los datos del usuario se utilizan prefijos dependiendo del dato, por ejemplo para guardar la descripción se utiliza el prefijo <em>LOOKING_FOR_DB</em> al cual se concatena el mail de usuario para tener de clave y como valor se guarda la descripcion.</p>
<dl class="docutils">
<dt>Se utilizan tres bases de datos:</dt>
<dd><ul class="first last simple">
<li>para password, id, token de user</li>
<li>para chats de user</li>
<li>para likes y matches de user</li>
</ul>
</dd>
</dl>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="config.html" class="btn btn-neutral float-right" title="Configuracion AppServer" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="buildSinDocker.html" class="btn btn-neutral" title="Build AppServer sin Docker" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Gaston Alberto Martinez.
      Last updated on Jul 14, 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>