.. _apiAppServer:

API
===

+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+------------------------------------------------------+
| Request                                                                                                                                                                                                                                 | Response                                                                                                     | Función                                              |
+====================+============================================================+============================================================+==========================================================================================+============================+==========+======================================================================+======================================================+
| Method             | URL                                                        | Header                                                     | Body                                                                                     | Header                     | Código   | Body                                                                 |                                                      |
+--------------------+------------------------------------------------------------+------------------------------------------------------------+------------------------------------------------------------------------------------------+----------------------------+----------+----------------------------------------------------------------------+------------------------------------------------------+
| POST               | <server>/user                                              | Authorization := username=”mi_nombre” pass=”mi_contraseña” | localization="latitud,longitud"                                                          |                            | HTTP 200 |                                                                      | Login                                                |
|                    |                                                            |                                                            |                                                                                          |                            +----------+----------------------------------------------------------------------+------------------------------------------------------+
|                    |                                                            |                                                            |                                                                                          |                            | HTTP 401 |                                                                      | Login fallido. Posteriormente cierra la conexión     |
+--------------------+------------------------------------------------------------+------------------------------------------------------------+------------------------------------------------------------------------------------------+----------------------------+----------+----------------------------------------------------------------------+------------------------------------------------------+
| GET                | <server>/user/token/id                                     |                                                            |                                                                                          |                            |          | token                                                                | Obtener token de conexión                            |
+--------------------+------------------------------------------------------------+------------------------------------------------------------+------------------------------------------------------------------------------------------+----------------------------+----------+----------------------------------------------------------------------+------------------------------------------------------+
| GET                | <server>/user?token=”mi_token”&res_id="un_nombre"          |                                                            |                                                                                          |                            |          | name, alias, etc [1]                                                 | Obtener datos usuario menos la foto                  |
+--------------------+------------------------------------------------------------+------------------------------------------------------------+------------------------------------------------------------------------------------------+----------------------------+----------+----------------------------------------------------------------------+------------------------------------------------------+
| GET                | <server>/users/photo?token=”mi_token”&res_id="un_nombre"   |                                                            |                                                                                          | Content-type:="image"      |          | Photo_64                                                             | Obtener la foto del usuario                          |
+--------------------+------------------------------------------------------------+------------------------------------------------------------+------------------------------------------------------------------------------------------+----------------------------+----------+----------------------------------------------------------------------+------------------------------------------------------+
| POST               | <server>/users/photo?token=”mi_token”                      |                                                            | Photo_64                                                                                 |                            |          |                                                                      | Cambiar foto usuario                                 |
+--------------------+------------------------------------------------------------+------------------------------------------------------------+------------------------------------------------------------------------------------------+----------------------------+----------+----------------------------------------------------------------------+------------------------------------------------------+
| GET                | <server>/users?token=”mi_token”                            |                                                            |                                                                                          | Content-type := “text/csv” |          | id1, name1, alias1,...                                               | Obtener datos de los posibles matches                |
|                    |                                                            |                                                            |                                                                                          |                            |          | id2, name2, alias2,...                                               |                                                      |
|                    |                                                            |                                                            |                                                                                          |                            |          | ...                                                                  |                                                      |
|                    |                                                            |                                                            |                                                                                          |                            |          | idn, namen, aliasn,                                                  |                                                      |
+--------------------+------------------------------------------------------------+------------------------------------------------------------+------------------------------------------------------------------------------------------+----------------------------+----------+----------------------------------------------------------------------+------------------------------------------------------+
| GET                | <server>/chats?token=”mi_token”                            |                                                            |                                                                                          | Content-type := “text/csv” |          | id1, name1, alias1,...                                               | Obtener datos de los matches (los que si matchearon) |
|                    |                                                            |                                                            |                                                                                          |                            |          | id2, name2, alias2,...                                               |                                                      |
|                    |                                                            |                                                            |                                                                                          |                            |          | ...                                                                  |                                                      |
|                    |                                                            |                                                            |                                                                                          |                            |          | idn, namen, aliasn,                                                  |                                                      |
+--------------------+------------------------------------------------------------+------------------------------------------------------------+------------------------------------------------------------------------------------------+----------------------------+----------+----------------------------------------------------------------------+------------------------------------------------------+
| GET                | <server>/chats?token=”mi_token”&res_id="friend_id"         |                                                            |                                                                                          | Content-type := “text/csv” |          | <id>,<message><id>,<message>                                         | Obtener el chat con un usuario                       |
+--------------------+------------------------------------------------------------+------------------------------------------------------------+------------------------------------------------------------------------------------------+----------------------------+----------+----------------------------------------------------------------------+------------------------------------------------------+
| GET                | <server>/interest?token=”mi_token”&res_id="mi_id_interest" |                                                            |                                                                                          | Content-type := “image”    |          | Photo_64                                                             | Obtener la imagen del interes                        |
+--------------------+------------------------------------------------------------+------------------------------------------------------------+------------------------------------------------------------------------------------------+----------------------------+----------+----------------------------------------------------------------------+------------------------------------------------------+
| POST               | <server>/users                                             | Authorization := username=”mi_nombre” pass=”mi_contraseña” | User=name,age,alias,email,sex,lookingFor,interest_id1::interest1||interest_id2::inte [2] |                            | HTTP 201 |                                                                      | SignUp. User es variable. Success                    |
|                    |                                                            |                                                            |                                                                                          |                            +----------+----------------------------------------------------------------------+------------------------------------------------------+
|                    |                                                            |                                                            |                                                                                          |                            | HTTP 401 |                                                                      | SignUp. User es variable. Error por otro existente   |
+--------------------+------------------------------------------------------------+------------------------------------------------------------+------------------------------------------------------------------------------------------+----------------------------+----------+----------------------------------------------------------------------+------------------------------------------------------+
| PUT                | <server>/users?token=”mi_token”                            |                                                            | User=name,age,sex,lookingFor,interest_id1::interest1||interest_id2::interest2            |                            |          |                                                                      | Update info usuario. User es variable                |
+--------------------+------------------------------------------------------------+------------------------------------------------------------+------------------------------------------------------------------------------------------+----------------------------+----------+----------------------------------------------------------------------+------------------------------------------------------+
| DELETE             | <server>/users?token=”mi_token”                            |                                                            |                                                                                          |                            |          |                                                                      | Eliminar user                                        |
+--------------------+------------------------------------------------------------+------------------------------------------------------------+------------------------------------------------------------------------------------------+----------------------------+----------+----------------------------------------------------------------------+------------------------------------------------------+
